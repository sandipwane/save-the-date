<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Save the Date - Sandip & Anokhi</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíù</text></svg>">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sandipwane.github.io/save-the-date/">
    <meta property="og:title" content="Save the Date - Sandip & Anokhi">
    <meta property="og:description" content="Join us as we celebrate our wedding on December 02, 2025 at Turf Club Garden, Pune">
    <meta property="og:image" content="https://sandipwane.github.io/save-the-date/preview2.JPG">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://sandipwane.github.io/save-the-date/">
    <meta property="twitter:title" content="Save the Date - Sandip & Anokhi">
    <meta property="twitter:description" content="Join us as we celebrate our wedding on December 02, 2025 at Turf Club Garden, Pune">
    <meta property="twitter:image" content="https://sandipwane.github.io/save-the-date/preview2.JPG">
    
    <!-- Preload hero images for faster loading -->
    <link rel="preload" as="image" href="hero-images/dancing-01.svg">
    <link rel="preload" as="image" href="hero-images/joinus-01.svg">
    <link rel="preload" as="image" href="hero-images/moving-01.svg">
    <link rel="preload" as="image" href="hero-images/rainhug-01.svg">
    <link rel="preload" as="image" href="hero-images/star-gazing-01.svg">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {}
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <!-- Canvas Confetti for celebration animation -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .font-serif {
            font-family: 'Playfair Display', serif;
        }
        .header-shadow {
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        }
        
        /* Image loading states */
        .image-container {
            position: relative;
            background: transparent;
            overflow: hidden;
            border-radius: 0.5rem;
        }
        
        .image-loading {
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
        }
        
        .image-loaded {
            opacity: 1;
        }
        
        /* Fixed dimensions for mobile image container */
        .mobile-image-wrapper {
            width: 100%;
            max-width: 20rem; /* max-w-xs */
            aspect-ratio: 1 / 1;
        }
        
        /* Fixed dimensions for desktop image container */
        .desktop-image-wrapper {
            width: 100%;
            max-width: 24rem; /* max-w-sm */
            aspect-ratio: 1 / 1;
        }
        
        @media (min-width: 1024px) {
            .desktop-image-wrapper {
                max-width: 28rem; /* max-w-md on lg screens */
            }
        }
        /* Navigation styles */
        .nav-link {
            position: relative;
            transition: all 0.2s ease;
        }
        .nav-link.active {
            color: rgb(17 24 39);
            font-weight: 500;
        }
        .nav-link:not(.active):hover {
            color: rgb(55 65 81);
        }
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: rgb(17 24 39);
        }

        /* Page transition animations */
        .page-content {
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }
        .page-content.active {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="min-h-screen bg-[#fcfcfc] transition-colors duration-200">
    <!-- Fixed Header with Navigation -->
    <header id="main-header" class="fixed top-0 left-0 right-0 z-50 bg-[#fcfcfc] transition-all duration-200">
        <div class="max-w-6xl mx-auto p-4 md:px-12 lg:px-16 md:py-6">
            <div class="flex justify-between items-center">
                <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-light tracking-wide text-gray-900">S & A</h1>

                <!-- Navigation Menu -->
                <nav class="flex items-center gap-6 md:gap-8">
                    <a href="#/" class="nav-link text-base md:text-lg text-gray-600" data-route="/">Save the Date</a>
                    <a href="#/about" class="nav-link text-base md:text-lg text-gray-600" data-route="/about">About</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content Container -->
    <div id="app-content" class="max-w-6xl mx-auto p-4 md:p-12 lg:p-16 mt-20 md:mt-24">
        <!-- Content will be dynamically loaded here -->
    </div>

    <!-- Save the Date Page Template -->
    <template id="save-the-date-page">
        <div class="page-content">
            <!-- Mobile Image - Shows only on mobile, below title -->
            <div class="block md:hidden mb-8">
                <div class="flex justify-center">
                    <div class="mobile-image-wrapper image-container">
                        <img id="hero-image-mobile" src="" alt="Calendar illustration" class="w-full h-full object-contain image-loading" loading="eager">
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="grid md:grid-cols-2 gap-8 md:gap-12 items-start">
            <!-- Left Column - Text Content -->
            <div class="space-y-8 md:space-y-12">
                <!-- Introduction Section -->
                <section>
                    <h2 class="text-2xl sm:text-3xl md:text-4xl font-light tracking-tight text-gray-900 mb-4 md:mb-6">
                        Hello, We're Getting Married!
                    </h2>
                    <p class="text-base sm:text-lg text-gray-600 leading-relaxed mb-3">
                        We're <span class="font-serif text-2xl font-medium text-gray-900 tracking-tight">Sandip & Anokhi</span>, and we're excited to invite you to celebrate our special day with us.
                    </p>
                    <p class="text-base sm:text-lg text-gray-600 leading-relaxed">
                        Join us as we begin our journey together, surrounded by family and friends who mean the world to us. Your presence will make our celebration complete.
                    </p>
                </section>

                <!-- Event Details Section -->
                <section>
                    <h3 class="text-xl sm:text-2xl font-medium tracking-tight text-gray-900 mb-6 md:mb-8">Event Details</h3>
                    
                    <!-- Details Grid -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6">
                        <!-- Date Card -->
                        <div class="p-5 sm:p-6 bg-white rounded-lg border border-gray-200 shadow-sm min-h-[160px]">
                            <div class="flex gap-4">
                                <div class="flex-shrink-0 w-5 flex justify-center">
                                    <i data-lucide="calendar" class="w-5 h-5 text-gray-500 mt-0.5"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="text-xs font-semibold uppercase tracking-wider text-gray-500 mb-2.5">Wedding Date</h4>
                                    <p class="text-lg font-medium text-gray-900 leading-tight">December 02, 2025</p>
                                    <p class="text-sm text-gray-600 mt-1.5">Tuesday</p>
                                </div>
                            </div>
                        </div>

                        <!-- Venue Card -->
                        <div class="p-5 sm:p-6 bg-white rounded-lg border border-gray-200 shadow-sm min-h-[160px]">
                            <div class="flex gap-4">
                                <div class="flex-shrink-0 w-5 flex justify-center">
                                    <i data-lucide="map-pin" class="w-5 h-5 text-gray-500 mt-0.5"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="text-xs font-semibold uppercase tracking-wider text-gray-500 mb-2.5">Venue</h4>
                                    <p class="text-lg font-medium text-gray-900 leading-tight">Turf Club Garden</p>
                                    <p class="text-sm text-gray-600 mt-1.5">Camp, Pune</p>
                                    <p class="text-sm text-gray-500 mt-0.5">Maharashtra, India</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action buttons -->
                    <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6">
                        <button onclick="generateWeddingICS()" class="w-full p-3 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-all text-left shadow-sm hover:shadow-md">
                            <div class="flex gap-4 px-2 sm:px-3">
                                <div class="flex-shrink-0 w-5 flex justify-center">
                                    <i data-lucide="calendar-plus" class="w-5 h-5 text-white"></i>
                                </div>
                                <div class="flex-1">
                                    <span class="text-base font-semibold text-white">Add to Calendar</span>
                                </div>
                            </div>
                        </button>
                        <button onclick="window.open('https://maps.app.goo.gl/CVNFFsvRL1Nj4a5ZA', '_blank')" class="w-full p-3 bg-gray-900 hover:bg-gray-800 text-white rounded-md transition-all text-left shadow-sm hover:shadow-md">
                            <div class="flex gap-4 px-2 sm:px-3">
                                <div class="flex-shrink-0 w-5 flex justify-center">
                                    <i data-lucide="map-pin" class="w-5 h-5 text-white"></i>
                                </div>
                                <div class="flex-1">
                                    <span class="text-base font-semibold text-white">View on Map</span>
                                </div>
                            </div>
                        </button>
                    </div>
                </section>

                <!-- RSVP Section -->
                <section>
                    <h3 class="text-xl sm:text-2xl font-medium tracking-tight text-gray-900 mb-6 md:mb-8">RSVP</h3>
                    <div class="p-5 sm:p-6 bg-white rounded-lg border border-gray-200 shadow-sm">
                        <p class="text-base text-gray-600 mb-5 leading-relaxed">
                            Please let us know if you'll be joining us for the celebration.
                        </p>
                        <button onclick="openRSVPModal()" class="px-5 py-3 bg-gray-900 text-white text-base font-semibold rounded-md hover:bg-gray-800 transition-colors hover:shadow-md">
                            Count Me In
                        </button>
                    </div>
                </section>
            </div>

            <!-- Right Column - Illustration (Desktop only) -->
            <div class="hidden md:flex justify-center md:justify-end md:sticky md:top-32">
                <div class="desktop-image-wrapper image-container">
                    <img id="hero-image-desktop" src="" alt="Calendar illustration" class="w-full h-full object-contain image-loading" loading="eager">
                </div>
            </div>
        </div>
    </template>

    <!-- About Page Template -->
    <template id="about-page">
        <div class="page-content">
            <div class="max-w-4xl mx-auto">
                <!-- Page Title -->
                <div class="text-center mb-12">
                    <h2 class="text-3xl sm:text-4xl md:text-5xl font-light tracking-tight text-gray-900 mb-4">Our Story</h2>
                    <p class="text-lg text-gray-600">How we met, fell in love, and decided to say "I do"</p>
                </div>

                <!-- Story Sections -->
                <div class="space-y-16">
                    <!-- First Meeting -->
                    <section class="bg-white rounded-lg p-6 md:p-8 shadow-sm border border-gray-200">
                        <div class="flex items-center gap-3 mb-4">
                            <i data-lucide="heart" class="w-5 h-5 text-pink-500"></i>
                            <h3 class="text-2xl font-medium text-gray-900">How We Met</h3>
                        </div>
                        <p class="text-gray-600 leading-relaxed">
                            Our love story began in the most unexpected way. What started as a chance encounter
                            blossomed into something beautiful. From our first conversation, we knew there was
                            something special between us.
                        </p>
                    </section>

                    <!-- The Journey -->
                    <section class="bg-white rounded-lg p-6 md:p-8 shadow-sm border border-gray-200">
                        <div class="flex items-center gap-3 mb-4">
                            <i data-lucide="map" class="w-5 h-5 text-blue-500"></i>
                            <h3 class="text-2xl font-medium text-gray-900">Our Journey Together</h3>
                        </div>
                        <p class="text-gray-600 leading-relaxed mb-4">
                            Through adventures big and small, we've built a life filled with laughter,
                            love, and countless memories. Every day with each other has been a gift.
                        </p>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6">
                            <div class="p-4 bg-gray-50 rounded-lg">
                                <p class="text-sm font-semibold text-gray-700 mb-1">Favorite Memory</p>
                                <p class="text-sm text-gray-600">Our first trip together</p>
                            </div>
                            <div class="p-4 bg-gray-50 rounded-lg">
                                <p class="text-sm font-semibold text-gray-700 mb-1">Shared Passion</p>
                                <p class="text-sm text-gray-600">Exploring new places</p>
                            </div>
                        </div>
                    </section>

                    <!-- The Proposal -->
                    <section class="bg-white rounded-lg p-6 md:p-8 shadow-sm border border-gray-200">
                        <div class="flex items-center gap-3 mb-4">
                            <i data-lucide="sparkles" class="w-5 h-5 text-yellow-500"></i>
                            <h3 class="text-2xl font-medium text-gray-900">The Proposal</h3>
                        </div>
                        <p class="text-gray-600 leading-relaxed">
                            When the moment came to take the next step, it was magical. Surrounded by
                            love and joy, we said yes to forever. Now, we can't wait to celebrate
                            this new chapter with all of you.
                        </p>
                    </section>

                    <!-- Thank You Message -->
                    <section class="text-center py-8">
                        <div class="inline-flex items-center gap-2 mb-4">
                            <span class="text-2xl">üíù</span>
                            <h3 class="text-2xl font-serif font-medium text-gray-900">Thank You</h3>
                            <span class="text-2xl">üíù</span>
                        </div>
                        <p class="text-gray-600 max-w-2xl mx-auto leading-relaxed">
                            We are so grateful to have you in our lives. Your love and support mean
                            the world to us, and we can't wait to share our special day with you.
                        </p>
                        <p class="text-lg font-serif text-gray-900 mt-6">With love,</p>
                        <p class="text-2xl font-serif text-gray-900 mt-2">Sandip & Anokhi</p>
                    </section>

                    <!-- Contact Section -->
                    <section class="bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg p-6 md:p-8 border border-gray-200">
                        <h3 class="text-2xl font-medium text-gray-900 mb-4 text-center">Get in Touch</h3>
                        <p class="text-gray-600 text-center mb-6">
                            Have questions about the wedding? Need help with travel arrangements?
                            We're here to help!
                        </p>
                        <div class="flex justify-center">
                            <button onclick="openRSVPModal()" class="px-6 py-3 bg-gray-900 text-white font-semibold rounded-md hover:bg-gray-800 transition-colors shadow-md">
                                Contact Us
                            </button>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </template>

    <!-- RSVP Modal -->
    <div id="rsvpModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto">
            <!-- Modal Header -->
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-light tracking-tight text-gray-900">RSVP for the Wedding</h2>
                    <button onclick="closeRSVPModal()" class="p-1 hover:bg-gray-100 rounded-md transition-colors">
                        <i data-lucide="x" class="w-5 h-5 text-gray-500"></i>
                    </button>
                </div>
            </div>

            <!-- Modal Body -->
            <form id="rsvpForm" class="p-6 space-y-5">
                <!-- Name Field -->
                <div>
                    <input type="text" id="guestName" name="guestName" required 
                           class="w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-gray-500 focus:border-gray-500 text-base" 
                           placeholder="Your name">
                </div>

                <!-- Contact (Email or Phone) -->
                <div>
                    <input type="text" id="guestContact" name="guestContact" required 
                           class="w-full px-3 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-gray-500 focus:border-gray-500 text-base" 
                           placeholder="Email or phone number">
                </div>

                <!-- Number of Guests - Simple buttons -->
                <div>
                    <label class="block text-sm font-medium text-gray-600 mb-2">How many guests?</label>
                    <div class="grid grid-cols-4 gap-2">
                        <button type="button" onclick="selectGuests(1)" data-guests="1" class="guest-btn py-2.5 px-3 border border-gray-300 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-700 transition-colors">1</button>
                        <button type="button" onclick="selectGuests(2)" data-guests="2" class="guest-btn py-2.5 px-3 border border-gray-300 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-700 transition-colors">2</button>
                        <button type="button" onclick="selectGuests(3)" data-guests="3" class="guest-btn py-2.5 px-3 border border-gray-300 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-700 transition-colors">3</button>
                        <button type="button" onclick="selectGuests('4+')" data-guests="4+" class="guest-btn py-2.5 px-3 border border-gray-300 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-700 transition-colors">4+</button>
                    </div>
                    <input type="hidden" id="numberOfGuests" name="numberOfGuests" value="1" required>
                </div>

                <!-- Simplified Attendance - Two big buttons -->
                <div class="grid grid-cols-2 gap-3">
                    <button type="button" onclick="selectAttendance('yes')" data-attendance="yes" 
                            class="attendance-btn py-4 px-4 border-2 border-gray-300 rounded-md text-gray-700 hover:border-green-500 hover:bg-green-50 transition-all">
                        <i data-lucide="check" class="w-5 h-5 mx-auto mb-1.5"></i>
                        <span class="block text-base font-semibold">I'll be there!</span>
                    </button>
                    <button type="button" onclick="selectAttendance('no')" data-attendance="no" 
                            class="attendance-btn py-4 px-4 border-2 border-gray-300 rounded-md text-gray-700 hover:border-red-500 hover:bg-red-50 transition-all">
                        <i data-lucide="x" class="w-5 h-5 mx-auto mb-1.5"></i>
                        <span class="block text-base font-semibold">Can't make it</span>
                    </button>
                    <input type="hidden" id="attendance" name="attendance" required>
                </div>

                <!-- Optional: Quick message -->
                <div>
                    <textarea id="message" name="message" rows="2" 
                              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-gray-500 focus:border-gray-500 text-sm" 
                              placeholder="Message for the couple (optional)"></textarea>
                </div>

                <!-- Error/Success Messages -->
                <div id="rsvpMessage" class="hidden">
                    <div id="rsvpMessageContent" class="p-3 rounded-md text-sm"></div>
                </div>

                <!-- Single Submit Button -->
                <div>
                    <button type="submit" id="submitRSVP" 
                            class="w-full py-3.5 bg-gray-900 text-white text-base font-semibold rounded-md hover:bg-gray-800 transition-colors hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed">
                        <span id="submitText">Send RSVP</span>
                        <span id="submitLoading" class="hidden">Sending...</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Router implementation
        class Router {
            constructor() {
                this.routes = {
                    '/': 'save-the-date-page',
                    '/about': 'about-page'
                };
                this.currentRoute = null;
                this.init();
            }

            init() {
                // Handle initial route
                this.handleRoute();

                // Listen for hash changes
                window.addEventListener('hashchange', () => this.handleRoute());

                // Handle back/forward browser buttons
                window.addEventListener('popstate', () => this.handleRoute());
            }

            handleRoute() {
                // Get current hash route
                const hash = window.location.hash.slice(1) || '/';
                const route = hash.startsWith('/') ? hash : '/' + hash;

                // Update navigation active states
                document.querySelectorAll('.nav-link').forEach(link => {
                    if (link.dataset.route === route) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });

                // Load the appropriate page
                this.loadPage(route);
            }

            loadPage(route) {
                const templateId = this.routes[route] || this.routes['/'];
                const template = document.getElementById(templateId);
                const content = document.getElementById('app-content');

                if (template && content) {
                    // Clear current content
                    content.innerHTML = '';

                    // Clone and insert new content
                    const newContent = template.content.cloneNode(true);
                    content.appendChild(newContent);

                    // Trigger animations
                    setTimeout(() => {
                        const pageContent = content.querySelector('.page-content');
                        if (pageContent) {
                            pageContent.classList.add('active');
                        }

                        // Reinitialize page-specific functionality
                        if (route === '/') {
                            displayRandomHeroImage();
                        }

                        // Reinitialize Lucide icons
                        lucide.createIcons();
                    }, 50);
                }

                this.currentRoute = route;
            }
        }

        // Initialize router when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new Router();
        });

        // Cache version - UPDATE THIS when adding/removing images
        const CACHE_VERSION = '1.0.0';
        
        // Hero images array - update this list when adding new images
        const heroImages = [
            'hero-images/dancing-01.svg',
            'hero-images/joinus-01.svg',
            'hero-images/moving-01.svg',
            'hero-images/rainhug-01.svg',
            'hero-images/star-gazing-01.svg'
        ];

        // Function to handle image loading with fade-in effect
        function loadImageWithFadeIn(imgElement, imageSrc) {
            // Create a new image object to preload
            const tempImg = new Image();
            
            tempImg.onload = function() {
                // Image has loaded successfully
                imgElement.src = imageSrc;
                imgElement.classList.remove('image-loading');
                imgElement.classList.add('image-loaded');
            };
            
            tempImg.onerror = function() {
                // Handle error gracefully - still show image area
                imgElement.classList.remove('image-loading');
                imgElement.classList.add('image-loaded');
            };
            
            // Start loading the image
            tempImg.src = imageSrc;
        }

        // Function to select and display a random hero image with history tracking
        function displayRandomHeroImage() {
            if (heroImages.length === 0) return;
            
            // Get stored data from localStorage
            let imageData = null;
            try {
                const stored = localStorage.getItem('heroImageData');
                imageData = stored ? JSON.parse(stored) : null;
            } catch (e) {
                console.log('Error reading localStorage:', e);
            }
            
            // Reset if version mismatch, no data, or corrupted data
            if (!imageData || imageData.cacheVersion !== CACHE_VERSION) {
                imageData = {
                    cacheVersion: CACHE_VERSION,
                    recentImages: [],
                    lastShownImage: null
                };
            }
            
            // Filter out recently shown images to avoid repetition
            let availableImages = heroImages.filter(img => 
                !imageData.recentImages.includes(img)
            );
            
            // If all images were recently shown (or only 1 image total), reset
            if (availableImages.length === 0 || heroImages.length === 1) {
                availableImages = heroImages;
                imageData.recentImages = [];
            }
            
            // Select a random image from available pool
            const randomIndex = Math.floor(Math.random() * availableImages.length);
            const selectedImage = availableImages[randomIndex];
            
            // Update recent images history (keep last 2-3 images)
            imageData.recentImages.push(selectedImage);
            const maxHistory = Math.min(3, Math.max(1, heroImages.length - 1));
            if (imageData.recentImages.length > maxHistory) {
                imageData.recentImages.shift();
            }
            
            // Update last shown image
            imageData.lastShownImage = selectedImage;
            
            // Save updated data to localStorage
            try {
                localStorage.setItem('heroImageData', JSON.stringify(imageData));
            } catch (e) {
                console.log('Error saving to localStorage:', e);
            }
            
            // Update both mobile and desktop image elements with fade-in
            const mobileImage = document.getElementById('hero-image-mobile');
            const desktopImage = document.getElementById('hero-image-desktop');
            
            if (mobileImage) {
                loadImageWithFadeIn(mobileImage, selectedImage);
            }
            if (desktopImage) {
                loadImageWithFadeIn(desktopImage, selectedImage);
            }
        }

        // Note: Hero image display and Lucide icons are now initialized by the router
        // when loading the save-the-date page

        // Add scroll shadow to header
        window.addEventListener('scroll', function() {
            const header = document.getElementById('main-header');
            if (window.scrollY > 10) {
                header.classList.add('header-shadow');
            } else {
                header.classList.remove('header-shadow');
            }
        });

        // Initialize EmailJS with your public key
        emailjs.init('Kh6ZdHS7_6Tx2Qzm2');

        // Guest selection function
        function selectGuests(num) {
            // Remove active state from all buttons
            document.querySelectorAll('.guest-btn').forEach(btn => {
                btn.classList.remove('bg-gray-900', 'text-white', 'border-gray-900', 'hover:bg-gray-900', 'hover:text-white');
                btn.classList.add('text-gray-700', 'border-gray-300', 'hover:bg-gray-100', 'hover:text-gray-700');
            });
            
            // Add active state to selected button and remove hover effects
            const selectedBtn = document.querySelector(`[data-guests="${num}"]`);
            selectedBtn.classList.add('bg-gray-900', 'text-white', 'border-gray-900', 'hover:bg-gray-900', 'hover:text-white');
            selectedBtn.classList.remove('text-gray-700', 'border-gray-300', 'hover:bg-gray-100', 'hover:text-gray-700');
            
            // Set hidden input value
            document.getElementById('numberOfGuests').value = num;
        }

        // Attendance selection function
        function selectAttendance(value) {
            // Remove active state from all buttons
            document.querySelectorAll('.attendance-btn').forEach(btn => {
                btn.classList.remove('border-green-500', 'bg-green-50',
                                    'border-red-500', 'bg-red-50');
            });
            
            // Add active state to selected button
            const selectedBtn = document.querySelector(`[data-attendance="${value}"]`);
            if (value === 'yes') {
                selectedBtn.classList.add('border-green-500', 'bg-green-50');
            } else {
                selectedBtn.classList.add('border-red-500', 'bg-red-50');
            }
            
            // Set hidden input value
            document.getElementById('attendance').value = value;
        }

        // RSVP Modal Functions
        function openRSVPModal() {
            // Check if already submitted
            const hasSubmitted = localStorage.getItem('rsvpSubmitted');
            if (hasSubmitted) {
                const submissionData = JSON.parse(hasSubmitted);
                if (confirm(`You already submitted an RSVP on ${new Date(submissionData.timestamp).toLocaleDateString()}. Do you want to submit a new one?`)) {
                    localStorage.removeItem('rsvpSubmitted');
                } else {
                    return;
                }
            }
            
            document.getElementById('rsvpModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Set default selections
            selectGuests(1);
            
            // Reinitialize Lucide icons for modal
            setTimeout(() => lucide.createIcons(), 100);
        }

        function closeRSVPModal() {
            document.getElementById('rsvpModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
            document.getElementById('rsvpForm').reset();
            hideMessage();
            
            // Reset button states
            document.querySelectorAll('.guest-btn').forEach(btn => {
                btn.classList.remove('bg-gray-900', 'text-white', 'border-gray-900', 'hover:bg-gray-900', 'hover:text-white');
                btn.classList.add('text-gray-700', 'border-gray-300', 'hover:bg-gray-100', 'hover:text-gray-700');
            });
            document.querySelectorAll('.attendance-btn').forEach(btn => {
                btn.classList.remove('border-green-500', 'bg-green-50',
                                    'border-red-500', 'bg-red-50');
            });
        }

        function showMessage(message, isError = false) {
            const messageDiv = document.getElementById('rsvpMessage');
            const messageContent = document.getElementById('rsvpMessageContent');
            
            messageDiv.classList.remove('hidden');
            messageContent.textContent = message;
            
            if (isError) {
                messageContent.className = 'p-3 rounded-md text-sm bg-red-100 text-red-700 border border-red-200';
            } else {
                messageContent.className = 'p-3 rounded-md text-sm bg-green-100 text-green-700 border border-green-200';
            }
        }

        function hideMessage() {
            document.getElementById('rsvpMessage').classList.add('hidden');
        }

        function setLoading(isLoading) {
            const submitBtn = document.getElementById('submitRSVP');
            const submitText = document.getElementById('submitText');
            const submitLoading = document.getElementById('submitLoading');
            
            if (isLoading) {
                submitBtn.disabled = true;
                submitText.classList.add('hidden');
                submitLoading.classList.remove('hidden');
            } else {
                submitBtn.disabled = false;
                submitText.classList.remove('hidden');
                submitLoading.classList.add('hidden');
            }
        }

        // Handle RSVP Form Submission
        document.getElementById('rsvpForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Check if attendance is selected
            const attendanceValue = document.getElementById('attendance').value;
            if (!attendanceValue) {
                showMessage('Please select if you will be attending', true);
                return;
            }
            
            // Get form data
            const formData = {
                guestName: document.getElementById('guestName').value,
                guestContact: document.getElementById('guestContact').value,
                numberOfGuests: document.getElementById('numberOfGuests').value,
                attendance: attendanceValue,
                message: document.getElementById('message').value || '',
                submittedAt: new Date().toLocaleString(),
            };

            setLoading(true);
            hideMessage();

            try {
                // Send email using EmailJS
                const response = await emailjs.send(
                    'service_y6pf3yo',
                    'template_8ryuflv',
                    {
                        to_name: 'Sandip & Anokhi',
                        from_name: formData.guestName,
                        from_email: formData.guestContact.includes('@') ? formData.guestContact : 'noreply@rsvp.com',
                        phone: !formData.guestContact.includes('@') ? formData.guestContact : 'Not provided',
                        contact_info: formData.guestContact,
                        guests_count: formData.numberOfGuests,
                        attending: formData.attendance === 'yes' ? 'Yes, attending' : 'Cannot attend',
                        message: formData.message || 'No message',
                        submitted_at: formData.submittedAt,
                    }
                );

                // Save to localStorage to prevent duplicate submissions
                localStorage.setItem('rsvpSubmitted', JSON.stringify({
                    name: formData.guestName,
                    contact: formData.guestContact,
                    timestamp: Date.now()
                }));

                // Trigger confetti animation if they're attending
                if (formData.attendance === 'yes') {
                    var count = 200;
                    var defaults = {
                        origin: { y: 0.7 }
                    };

                    function fire(particleRatio, opts) {
                        confetti({
                            ...defaults,
                            ...opts,
                            particleCount: Math.floor(count * particleRatio)
                        });
                    }

                    fire(0.25, {
                        spread: 26,
                        startVelocity: 55,
                    });
                    fire(0.2, {
                        spread: 60,
                    });
                    fire(0.35, {
                        spread: 100,
                        decay: 0.91,
                        scalar: 0.8
                    });
                    fire(0.1, {
                        spread: 120,
                        startVelocity: 25,
                        decay: 0.92,
                        scalar: 1.2
                    });
                    fire(0.1, {
                        spread: 120,
                        startVelocity: 45,
                    });
                }

                // Show success message
                showMessage('Thank you! Your RSVP has been sent successfully. We look forward to celebrating with you!', false);
                
                // Close modal after 3 seconds
                setTimeout(() => {
                    closeRSVPModal();
                }, 3000);
                
            } catch (error) {
                console.error('RSVP submission error:', error);
                showMessage('Sorry, there was an error sending your RSVP. Please try again or contact us directly.', true);
            } finally {
                setLoading(false);
            }
        });

        // Close modal when clicking outside
        document.getElementById('rsvpModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeRSVPModal();
            }
        });

        // Generate ICS file for calendar download
        function generateWeddingICS() {
            // Wedding details
            const eventTitle = "Sandip & Anokhi's Wedding";
            const eventLocation = "Turf Club Garden, Camp, Pune, Maharashtra, India";
            const mapUrl = "https://maps.app.goo.gl/CVNFFsvRL1Nj4a5ZA";
            const eventDescription = "Join us as we celebrate the wedding of Sandip & Anokhi. Your presence will make our celebration complete!\\n\\nVenue: " + eventLocation;
            
            // Date: December 02, 2025 - formatted as all-day event
            const eventDate = "20251202"; // YYYYMMDD format
            
            // Generate unique ID
            const uid = "wedding-" + Date.now() + "@sandipandanokhi.com";
            
            // Create ICS content
            const icsContent = 
                "BEGIN:VCALENDAR\r\n" +
                "VERSION:2.0\r\n" +
                "PRODID:-//Sandip & Anokhi Wedding//EN\r\n" +
                "CALSCALE:GREGORIAN\r\n" +
                "METHOD:REQUEST\r\n" +
                "BEGIN:VEVENT\r\n" +
                "UID:" + uid + "\r\n" +
                "DTSTART;VALUE=DATE:" + eventDate + "\r\n" +
                "DTEND;VALUE=DATE:" + eventDate + "\r\n" +
                "SUMMARY:" + eventTitle + "\r\n" +
                "DESCRIPTION:" + eventDescription + "\r\n" +
                "LOCATION:" + eventLocation + "\r\n" +
                "URL:" + mapUrl + "\r\n" +
                "STATUS:CONFIRMED\r\n" +
                "SEQUENCE:0\r\n" +
                "BEGIN:VALARM\r\n" +
                "TRIGGER:-P7DT13H\r\n" +
                "ACTION:DISPLAY\r\n" +
                "DESCRIPTION:Sandip & Anokhi's Wedding coming up next week!\r\n" +
                "END:VALARM\r\n" +
                "BEGIN:VALARM\r\n" +
                "TRIGGER:-P1DT13H\r\n" +
                "ACTION:DISPLAY\r\n" +
                "DESCRIPTION:See you tomorrow at Sandip & Anokhi's wedding!\r\n" +
                "END:VALARM\r\n" +
                "END:VEVENT\r\n" +
                "END:VCALENDAR";
            
            // Create blob and download
            const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            // Create temporary download link
            const link = document.createElement('a');
            link.href = url;
            link.download = 'sandip-anokhi-wedding.ics';
            document.body.appendChild(link);
            link.click();
            
            // Cleanup
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>